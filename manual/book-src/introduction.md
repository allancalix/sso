# Introduction

**Warning: The author of this application is not a security expert, nor has the code undergone any kind of review or verification. Use it at your own risk.**

Ark Auth is an authentication server, it is intended to be used as a backend for other services which must authenticate their users requests.

## Authentication Methods

The following user authentication methods are supported.

### Password Login

- Users can authenticate to a service using a unique email address and password.
- A successful login produces a time-limited, revokable JSON web token which can be used to authenticate requests.
- User passwords can be reset via email.
- Passwords are stored as `bcrypt` hashes.
- Password strength is checked by `zxcvbn`.
- Password leaks are checked by `haveibeenpwned.com`.
- Users can be created without passwords to disable password login.

### API Key

- Users can authenticate requests to a service using a unique, random key.
- Keys are not time-limited but are revokable.

### OAuth2

- Users can authenticate to services via supported OAuth2 providers.
- Authentication produces a time-limited, revokable JSON web token which can be used to authenticate requests.

## Service Integration

The following diagram illustrates how services and Ark Auth integrate to authenticate user requests.

![User request verification](./asset/diagram.svg)

1. User with token or key acquired by authentication method sends HTTP request to service.
2. Service sends HTTP request to Ark Auth with its own service key, and the users token or key.
3. Ark Auth authenticates service using the service key, and verifies user token or key.
4. If authenticated/verified, service handles request and sends HTTP response to user.
5. User handles HTTP response.

## Definitions

Definitions for terms used throughout this manual.

### User

A person or API consumer identified by a unique email address who wants to interact with one or more services.

### Service

An application that must authenticate user requests, registered as a service with Ark Auth using a name and URL.

### Key

Random, unique keys generated by Ark Auth. Keys may be revoked to prevent use.

#### Root Key

Keys linked to no services or users, generated by command line and used to create services via HTTP requests.

#### Service Key

Keys linked to one service, used by Ark Auth to authenticate HTTP requests from services.

#### User Key

Keys linked to one user and one service, allows user to authenticate with the linked service.

### Token

JSON web tokens used for time-limited authentication, generated for users from a user key. Revoking the key used to generate a token also revokes the token.
